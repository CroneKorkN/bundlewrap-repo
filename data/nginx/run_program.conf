# https://www.nginx.com/resources/wiki/start/topics/examples/fcgiwrap/

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name ${server_name};

    ssl_certificate /var/lib/dehydrated/certs/${server_name}/fullchain.pem;
    ssl_certificate_key /var/lib/dehydrated/certs/${server_name}/privkey.pem;

    location / {
        # Disable gzip (it makes scripts feel slower since they have to complete
        # before getting gzipped)
        gzip off;

        # Set the root to /usr/lib (inside this location this means that we are
        # giving access to the files under /usr/lib/cgi-bin)
        root	/usr/lib;

        # Fastcgi socket
        fastcgi_pass  unix:/run/fcgiwrap.socket;

        # Fastcgi parameters, include the standard ones
        include /etc/nginx/params/fastcgi;

        # Adjust non standard parameters (SCRIPT_FILENAME)
        fastcgi_param SCRIPT_FILENAME /usr/lib/cgi-bin/hello.cgi;
    }
}
